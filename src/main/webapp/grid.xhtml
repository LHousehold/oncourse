
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:param name="pagenumber" value="#{request.getParameter('pagenumber')}" />
    <ui:param name="cpid" value="#{request.getParameter('cpid')}" />

    <!--<div class="pos_all" id="cppage_top" data-page-number="#{pagenumber}">-->
    <div id="item_container" class="pos_all">
        <div id="file_menu">

            <h:outputText value="#{PageEditor.getFiles(cpid)}" escape="false" />

        </div>

        <div id="grid">
            <div id="drag_grid">
                <div id="TL" class="grid_item" grid_group="M T L TL">
                </div>
                <div id="T" class="grid_item" grid_group="M T L R TL TR">
                </div>
                <div id="TR" class="grid_item" grid_group="M T R TR">
                </div>
                <div id="L" class="grid_item" grid_group="M L T B TL BL">
                </div>
                <div id="M" class="grid_item" grid_group="M T L R B TL TR BL BR">
                </div>
                <div id="R" class="grid_item" grid_group="M R T B TR BR">
                </div>
                <div id="BL" class="grid_item" grid_group="M B L BL">
                </div>
                <div id="B" class="grid_item" grid_group="M B L R BL BR">
                </div>
                <div id="BR" class="grid_item" grid_group="M B R BR">
                </div>
            </div>
        </div>
    </div>

    <div id="packegeID" style="display:none;" data_cpid="#{cpid}" data_page="#{pagenumber}"></div>

    <!-- this call to getTiles needs to be called with the passed parameters -->
    <h:outputText value="#{PageEditor.getTiles(cpid, pagenumber)}" escape="false" />

    <script type="text/javascript">
        set_drag_listener();
        var set_page_height= function(){
            var page_content = document.querySelector('#page_content');

            if(page_content){
                var jq_page_content = $('#page_content');

                var heightOffset = jq_page_content.offset().top;
                var windowHeight = window.innerHeight;

                page_content.style.position = "absolute";
                page_content.style.height = windowHeight - heightOffset + "px";
                page_content.style.width = "100%";
            }
        };

        set_page_height();
        window.onresize = set_page_height;
    </script>
</html>
